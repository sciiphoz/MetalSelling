-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Client"
(
    "Id" serial NOT NULL,
    "IdClientType" integer,
    "Name" character varying(50),
    "Phone" character varying(20),
    "Email" character varying(50),
    "PersonalDiscount" numeric(4, 2),
    PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."MetalType"
(
    "Id" serial NOT NULL,
    "Title" character varying(50),
    PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Order"
(
    "Id" serial NOT NULL,
    "IdProduct" integer,
    "IdClient" integer,
    "Quantity" integer,
    "Price" numeric(11, 2),
    "Status" character varying(20),
    "Date" date,
    PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Supply"
(
    "Id" serial NOT NULL,
    "IdSupplier" integer,
    "IdProduct" integer,
    "Amount" integer,
    "Price" numeric(11, 2),
    "Status" character varying(50),
    "Date" date,
    PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Supplier"
(
    "Id" serial NOT NULL,
    "Title" character varying(50),
    "PricePerPiece" numeric(7, 2),
    PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."Product"
(
    "Id" serial NOT NULL,
    "IdMetalType" integer,
    "Title" character varying(50),
    "Amount" integer,
    "PricePerPiece" numeric(7, 2),
    PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."History"
(
    "Id" serial NOT NULL,
    "IdProduct" integer,
    "Quantity" integer,
    "Date" date,
    PRIMARY KEY ("Id")
);

CREATE TABLE IF NOT EXISTS public."ClientType"
(
    "Id" serial NOT NULL,
    "Title" character varying(50),
    PRIMARY KEY ("Id")
);

ALTER TABLE IF EXISTS public."Client"
    ADD FOREIGN KEY ("IdClientType")
    REFERENCES public."ClientType" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Order"
    ADD FOREIGN KEY ("IdClient")
    REFERENCES public."Client" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Order"
    ADD FOREIGN KEY ("IdProduct")
    REFERENCES public."Product" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Supply"
    ADD FOREIGN KEY ("IdProduct")
    REFERENCES public."Product" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Supply"
    ADD FOREIGN KEY ("IdSupplier")
    REFERENCES public."Supplier" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."Product"
    ADD FOREIGN KEY ("IdMetalType")
    REFERENCES public."MetalType" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public."History"
    ADD FOREIGN KEY ("IdProduct")
    REFERENCES public."Product" ("Id") MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;